# Lecture 14: Route Guards, 404 Pages & Lazy Loading

## Theory

### 1. Lazy Loading

Lazy loading means loading components **only when needed**, reducing initial bundle size and improving performance.

React Router supports lazy loading using:

```jsx
const Component = React.lazy(() => import("./Component"));
```

Then wrap in `Suspense`:

```jsx
<Suspense fallback={<h2>Loading...</h2>}>
  <Component />
</Suspense>
```

---

### 2. Protected Routes (Auth Based)

A Protected Route ensures that a user can access a page **only if authenticated**.

Common logic:

* If user is logged in → show the page
* If not logged in → redirect to login

---

### 3. Conditional Navigation

Programmatically redirect the user using:

```jsx
import { useNavigate } from "react-router-dom";
```

Useful for:

* After login
* After logout
* Preventing access based on conditions

---

### 4. 404 Not Found Page

A 404 route catches **all undefined paths**:

```jsx
<Route path="*" element={<NotFound />} />
```

This route must be at the bottom.

---

## Practical Examples (Full Programs)

### Example 1 — Lazy Loading

```jsx
import React, { Suspense } from "react";
import { BrowserRouter, Routes, Route } from "react-router-dom";

const About = React.lazy(() => import("./About"));
const Home = React.lazy(() => import("./Home"));

export default function App() {
  return (
    <BrowserRouter>
      <Suspense fallback={<h2>Loading...</h2>}>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
        </Routes>
      </Suspense>
    </BrowserRouter>
  );
}
```

---

### Example 2 — Protected Route Component

```jsx
import { Navigate } from "react-router-dom";

export function ProtectedRoute({ isAuth, children }) {
  if (!isAuth) return <Navigate to="/login" replace />;
  return children;
}
```

Usage:

```jsx
<Route
  path="/dashboard"
  element={
    <ProtectedRoute isAuth={userLoggedIn}>
      <Dashboard />
    </ProtectedRoute>
  }
/>
```

---

### Example 3 — Conditional Navigation (useNavigate)

```jsx
import { useNavigate } from "react-router-dom";

export default function Login() {
  const navigate = useNavigate();

  function handleLogin() {
    // after login success
    navigate("/dashboard");
  }

  return (
    <button onClick={handleLogin}>Login</button>
  );
}
```

---

### Example 4 — 404 Not Found Page

```jsx
function NotFound() {
  return <h1>404 - Page Not Found</h1>;
}

export default function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
    </BrowserRouter>
  );
}
```

---

## Practice Tasks

### Task 1 — Lazy Loading

Lazy load:

* Home
* About
* Contact
  and display a custom loader.

---

### Task 2 — Protected Route

Create a protected route:

```
/profile
```

If user is not logged in, redirect to `/login`.

---

### Task 3 — Conditional Navigation

After clicking a button, navigate to `/thank-you`.

---

### Task 4 — 404 Page

Create a custom-styled 404 page with:

* Back to Home button
* Error message

---

Request the next lecture when ready.
